\section{Use cases for Purchases}

\begin{ucbox}{\subsubsection{UCPO001: List Purchase Orders}}
\label{UCPO001}

Actors: System, Client

\textbf{Preconditions:}

\ucitem None.

\textbf{Event flow:}

\ucitem The Client calls the List Purchase Orders.

\ucitem The System responds with a list of the purchase orders recorded in the System. If there are no purchase orders in the System, the response is an empty list.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO002: Describe Purchase Order}}
\label{UCPO002}

Actors: System, Client

\textbf{Preconditions:} 

\ucitem The purchase order \textit{poid} exists.

\textbf{Event flow:}

\ucitem The Client calls the Describe Purchase Order endpoint providing the ID (\textit{poid}) of the purchase order.

\ucitem The System responds with the description (its attributes and values) of the purchase order \textit{poid}.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO003: Create Purchase Order}}
\label{UCPO003}

Actors: System, Client

\textbf{Preconditions:}

\ucitem None.

\textbf{Event flow:}

\ucitem The Client calls the Create Purchase Order endpoint providing all the values for the mandatory attributes and optionally the values for the optional ones.

\ucitem The System responds with the ID (\textit{poid}) of the newly created purchase order.

\textbf{Postconditions:}

\ucitem The purchase order described in the adding call exists in the System with the ID \textit{poid}.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO004: Edit Purchase Order}}
\label{UCPO004}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists.

\textbf{Event flow:}

\ucitem The Client calls the Edit Purchase Order endpoint providing the purchase order ID (\textit{poid}) and all the values for the mandatory attributes and optionally the values for the 
optional ones.

\ucitem The System responds with the ID (\textit{poid}) of the modified purchase order.

\textbf{Postconditions:}

\ucitem The attribute values for the purchase order \textit{poid} are the ones provided in the modifying call.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO005: Close Purchase Order}}
\label{UCPO005}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists and its state is open.

\textbf{Event flow:}

\ucitem The Client calls the Close Purchase Order endpoint providing the purchase order ID (\textit{poid}).

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase order \textit{poid}’s state is closed.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO006: Open Purchase Order}}
\label{UCPO006}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists and its state is closed.

\textbf{Event flow:}

\ucitem The Client calls the Open Purchase Order endpoint providing the purchase order ID (\textit{poid}).

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase order \textit{poid}’s state is open.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO007: Delete Purchase Order}}
\label{UCPO007}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists and its state is closed.

\textbf{Event flow:}

\ucitem The Client calls the Delete Purchase Order endpoint providing the ID (\textit{poid}) of the purchase order to delete.

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase order \textit{poid} has been deleted and no longer exists in the system.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO008: List Purchase Lines from Purchase Order}}
\label{UCPO008}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists.

\textbf{Event flow:}

\ucitem The Client calls the List Purchase Order Lines providing the ID (\textit{poid}) of the purchase order which lines have to be listed.

\ucitem The System responds with a list of the purchase lines belonging to the purchase order \textit{poid}. If the purchase order has no lines, the response is an empty list.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO009: List Purchase Lines by Product}}
\label{UCPO009}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The product \textit{pid} exists.

\textbf{Event flow:}

\ucitem The Client calls the List Purchase Lines by Product providing the ID (\textit{pid}) of the product from which to list Purchase Lines.

\ucitem The System responds with a list of all the Purchase Lines for the product \textit{pid}. If the product has no purchases, the response is an empty list.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO010: List Purchase Lines by Provider}}
\label{UCPO010}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The provider \textit{prid} exists.

\textbf{Event flow:}

\ucitem The Client calls the List Purchase Lines by Provider providing the ID (\textit{prid}) of the provider from which to list Purchase Lines.

\ucitem The System responds with a list of all the Purchase Lines for the provider \textit{prid}. If the provider has no lines, the response is an empty list.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO011: Describe Purchase Line}}
\label{UCPO011}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase line \textit{plid} exists.

\textbf{Event flow:}

\ucitem The Client calls the Describe Purchase Line endpoint providing the ID (\textit{plid}) of the purchase line.

\ucitem The System responds with the description (its attributes and values) of the purchase line \textit{plid}.

\textbf{Postconditions:}

\ucitem None.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO012: Create Purchase Line}}
\label{UCPO012}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists (if assigned).

\ucitem The product \textit{pid} exists.

\ucitem The provider \textit{prid} exists.

\ucitem The product offer \textit{pofid} exists (if referenced).

\textbf{Event flow:}

\ucitem The Client calls the Create Purchase Line endpoint providing the ID (\textit{pid}) of the product to purchase and its unit price, or the ID (\textit{pofid}) of the product offer of the product to purchase, and optionally the ID (\textit{poid}) of the purchase order the line has to be assigned to.

\ucitem The System responds with the ID (\textit{plid}) of the newly created purchase line.

\textbf{Postconditions:}

\ucitem The purchase line described in the adding call exists in the System with the ID \textit{plid}. If a product offer is referenced but a unit price was provided, the unit price provided overrides the one of the product offer.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO013: Edit Purchase Line}}
\label{UCPO013}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase line \textit{plid} exists.

\ucitem The product \textit{pid} exists (if modified).

\ucitem The purchase order \textit{poid} exists (if assigned/modified).

\ucitem The provider \textit{prid} exists (if modified).

\textbf{Event flow:}

\ucitem The Client calls the Edit Purchase Line endpoint providing the purchase line ID (\textit{plid}) and all the values for the mandatory attributes and optionally the values for the 
optional ones.

\ucitem The System responds with the ID (\textit{plid}) of the modified purchase line.

\textbf{Postconditions:}

\ucitem The attribute values for the purchase line \textit{plid} are the ones provided in the modifying call.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO014: Assign Purchase Line to Purchase Order}}
\label{UCPO014}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase order \textit{poid} exists and its state is open.

\ucitem The purchase line \textit{plid} exists.

\textbf{Event flow:}

\ucitem The Client calls the Assign Purchase Line to Purchase Order endpoint providing the purchase order ID (\textit{poid}) to which the line has to be assigned and the purchase line ID (
\textit{plid}) of the line to be assigned.

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase line \textit{plid} is assigned to the purchase order \textit{poid}.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO015: Acknowledge Purchase Line}}
\label{UCPO015}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase line \textit{plid} exists and is for a quantity \textit{q}.

\ucitem The product \textit{pid} exists. 

\textbf{Event flow:}

\ucitem The Client calls the Acknowledge Purchase Line endpoint providing the ID (\textit{plid}) of the purchase line to acknowledge.

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase line \textit{plid} state is ‘acknowledged’.

\ucitem The stock of the product \textit{pid} has increased by \textit{q}.

\end{ucbox}

\begin{ucbox}{\subsubsection{UCPO016: Delete Purchase Line}}
\label{UCPO016}

Actors: System, Client

\textbf{Preconditions:}

\ucitem The purchase line \textit{plid} exists.

\textbf{Event flow:}

\ucitem The Client calls the Delete Purchase Line endpoint providing the ID (\textit{plid}) of the purchase line to delete.

\ucitem The System responds with no errors.

\textbf{Postconditions:}

\ucitem The purchase line \textit{plid} has been deleted and no longer exists in the system.

\end{ucbox}
\newpage